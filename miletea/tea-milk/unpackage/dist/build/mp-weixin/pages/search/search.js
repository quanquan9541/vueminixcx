(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"3c20":function(t,e,n){"use strict";(function(t,e){var a=n("4ea4");n("e1b3"),n("4a2a"),n("a9ff");a(n("66fd"));var i=a(n("f136"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"42c8":function(t,e,n){"use strict";n.r(e);var a=n("81eb"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},6505:function(t,e,n){},"81eb":function(t,e,n){"use strict";(function(t,a){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("2eee")),u=i(n("448a")),r=i(n("c973")),c=n("efb0"),s=n("9767"),l=i(n("7c34")),d=(t.database(),{data:function(){return{searchtype:l.default,rangetime:[new Date-6048e5,new Date],logdata:[],data:[],num:"",keyword:"",title:"产品",show:!1,type:"name",columns:[[{label:"产品",type:"name"},{label:"配料",type:"goods_desc"}]],Xx:"",More:!1}},onLoad:function(t){a.$u.mpShare.title="奶茶搜索",this.searchtype=t.type},onShow:function(){var t=a.getStorageSync("log");if(!t.length)return this.logdata=[],void(this.keyword="奶茶奇缘");this.keyword=t[0]||"奶茶奇缘",this.logdata=t},watch:{rangetime:function(t){}},onReachBottom:function(){this.More&&this.getdatalist()},computed:{where:function(){return"add_date>=".concat(this.rangetime[0]," && add_date<=").concat(this.rangetime[1])}},mounted:function(){},methods:{maskClick:function(){var t=this;a.showLoading({icon:"loading",title:"搜索中",mask:!0}),setTimeout((function(){t.Xx=t.where,t.getdatalist()}),1500)},setdata:function(){var t=this.logdata,e=(t.unshift(this.keyword),t.slice(0,3));this.logdata=e,a.setStorageSync("log",e)},cancel:function(){this.show=!1},clickIcon:function(){this.show=!0},change:function(t){this.title=t.value[0].label,this.type=t.value[0].type},confirm:function(t){this.show=!1,this.title=t.value[0].label,this.type=t.value[0].type},focus:function(){this.keyword=""},search:(0,s.antiShake)((function(){this.keyword?(a.showLoading({icon:"loading",title:"搜索中",mask:!0}),this.Xx=this.ptype(),this.getdatalist()):a.showToast({icon:"error",title:"请输入搜索内容",mask:!0,duration:1500})})),ptype:function(){if("name"==this.type){var t={name:new RegExp(this.keyword,"gi"),state:!0};return t}var e={goods_desc:new RegExp(this.keyword,"gi"),state:!0};return e},getdatalist:function(){var t=this;return(0,r.default)(o.default.mark((function e(){var n,i,r,s,l;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.More=!0,n=t.data.length,i=t.Xx,e.next=5,(0,c.getdata)(i,n,6);case 5:if(r=e.sent,console.log(r),a.hideLoading(),r.result.count){e.next=11;break}return t.keyword="",e.abrupt("return",a.showToast({icon:"error",title:"没有数据",mask:!0,duration:900}));case 11:t.setdata(),s=r.result.data,l=t.data,t.data=[].concat((0,u.default)(s),(0,u.default)(l)),t.num=r.result.count,t.data.length==t.num&&(t.More=!1,a.showToast({icon:"none",title:"共"+r.result.count+"条数据",mask:!0,duration:900}));case 17:case"end":return e.stop()}}),e)})))()}}});e.default=d}).call(this,n("a9ff")["default"],n("543d")["default"])},a440:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uSearch:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-search/u-search")]).then(n.bind(null,"c6d8"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"eb33"))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,"f1fb"))},list:function(){return n.e("components/list/list").then(n.bind(null,"547f"))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"8227"))}},i=function(){var t=this.$createElement,e=(this._self._c,this.data.length);this.$mp.data=Object.assign({},{$root:{g0:e}})},o=[]},edb0:function(t,e,n){"use strict";var a=n("6505"),i=n.n(a);i.a},f136:function(t,e,n){"use strict";n.r(e);var a=n("a440"),i=n("42c8");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("edb0");var u=n("f0c5"),r=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=r.exports}},[["3c20","common/runtime","common/vendor"]]]);