(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"3c20":function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("e1b3"),n("a9ff");a(n("66fd"));var i=a(n("f136"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"42c8":function(e,t,n){"use strict";n.r(t);var a=n("81eb"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},"50ab":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uSearch:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-search/u-search")]).then(n.bind(null,"c6d8"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"eb33"))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,"f1fb"))},list:function(){return n.e("components/list/list").then(n.bind(null,"547f"))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"8227"))}},i=function(){var e=this.$createElement,t=(this._self._c,this.data.length);this.$mp.data=Object.assign({},{$root:{g0:t}})},o=[]},6505:function(e,t,n){},"81eb":function(e,t,n){"use strict";(function(e,a){var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("2eee")),r=i(n("c973")),u=n("9767"),c=i(n("7c34")),s=e.database(),d={data:function(){return{searchtype:c.default,rangetime:[new Date-6048e5,new Date],logdata:[],data:[],num:"",keyword:"",title:"产品",show:!1,type:"name",columns:[[{label:"产品",type:"name"},{label:"配料",type:"goods_desc"}]]}},onLoad:function(e){this.searchtype=e.type},onShow:function(){var e=a.getStorageSync("log");if(!e.length)return this.logdata=[],void(this.keyword="奶茶奇缘");this.keyword=e[0]||"奶茶奇缘",this.logdata=e},watch:{rangetime:function(e){}},computed:{where:function(){return"add_date>=".concat(this.rangetime[0]," && add_date<=").concat(this.rangetime[1])}},mounted:function(){},methods:{maskClick:function(){var e=this;a.showLoading({icon:"loading",title:"搜索中",mask:!0}),setTimeout((function(){var t=e.where;e.getdata(t)}),1500)},setdata:function(){var e=this.logdata,t=(e.unshift(this.keyword),e.slice(0,3));this.logdata=t,a.setStorageSync("log",t)},cancel:function(){this.show=!1},clickIcon:function(){this.show=!0},change:function(e){this.title=e.value[0].label,this.type=e.value[0].type},confirm:function(e){this.show=!1,this.title=e.value[0].label,this.type=e.value[0].type},focus:function(){this.keyword=""},search:(0,u.antiShake)((function(){if(this.keyword){a.showLoading({icon:"loading",title:"搜索中",mask:!0});var e=this.ptype();this.getdata(e)}else a.showToast({icon:"error",title:"请输入搜索内容",mask:!0,duration:1500})})),ptype:function(){if("name"==this.type){var e={name:new RegExp(this.keyword,"gi"),state:!0};return e}var t={goods_desc:new RegExp(this.keyword,"gi"),state:!0};return t},getdata:function(e){var t=this;return(0,r.default)(o.default.mark((function n(){var i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,s.collection("tea-milk-list").where(e).orderBy("create_date desc").get();case 2:if(i=n.sent,a.hideLoading(),i.result.data.length){n.next=7;break}return t.keyword="",n.abrupt("return",a.showToast({icon:"error",title:"搜索内容不存在",mask:!0,duration:900}));case 7:t.setdata(),t.data=i.result.data,t.num=i.result.data.length;case 10:case"end":return n.stop()}}),n)})))()}}};t.default=d}).call(this,n("a9ff")["default"],n("543d")["default"])},edb0:function(e,t,n){"use strict";var a=n("6505"),i=n.n(a);i.a},f136:function(e,t,n){"use strict";n.r(t);var a=n("50ab"),i=n("42c8");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("edb0");var r=n("f0c5"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=u.exports}},[["3c20","common/runtime","common/vendor"]]]);