(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/jdurl/jdurl"],{"124a":function(t,e,n){},1503:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("8b4a"),n("4a2a"),n("a9ff");o(n("66fd"));var a=o(n("c4ff"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"61bf":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"5463"))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,"9f95"))},uSkeleton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-skeleton/u-skeleton")]).then(n.bind(null,"0983"))}},a=function(){var t=this.$createElement;this._self._c},i=[]},b892:function(t,e,n){"use strict";var o=n("124a"),a=n.n(o);a.a},be3a:function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("af3c")),i=o(n("3233")),u={data:function(){return{state:!1,show:!1,jdvalue:"",redata:{},placeholderStyle:"color:#c0c3ff;font-size:14px",styles:{color:"#aa55ff",borderColor:"#ffaaff"}}},methods:{containsNumber:function(t){return!!t.match(/\d/g)},isUrl:function(t){var e=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i");return e.test(t)},jdClick:function(){if(!this.jdvalue)return t.showLoading({mask:!0,icon:"error",title:"查询为空"}),void setTimeout((function(){t.hideLoading()}),2e3);var e=t.getStorageSync("url_time");if(Date.now()-e<3e3)return t.showLoading({mask:!0,icon:"error",title:"查询过于频繁"}),void setTimeout((function(){t.hideLoading()}),2e3);if(!this.isUrl(this.jdvalue)||!this.containsNumber(this.jdvalue))return this.jdvalue=null,t.showLoading({mask:!0,icon:"error",title:"链接错误"}),void setTimeout((function(){t.hideLoading()}),2e3);this.state=!0,this.show=!1;var n=this.jdvalue.match(/\d+(\.\d+)?/g)[0];this.requst(n)},urlchenge:function(e){var n=this,o="859a28687efe4f4eb0f88f5669e869f6",a="8abdd6bc4b34757b9793f48aba4883d5",i=this.dateFormat(new Date),u="jd.union.open.promotion.common.get",r=e,s={end_date:null,optional_fields:null,order_state:"WAIT_SELLER_STOCK_OUT",start_date:null,promotionCodeReq:{materialId:r,siteId:4101001220}},d=o+"360buy_param_json"+JSON.stringify(s)+"app_key"+a+"method"+u+"timestamp"+i+"v1.0"+o,f=this.sign(d),l="https://api.jd.com/routerjson?app_key="+a+"&method="+u+"&v=1.0&sign="+f+"&360buy_param_json="+JSON.stringify(s)+"&timestamp="+i;t.request({url:l,data:{},success:function(e){var o=JSON.parse(e.data.jd_union_open_promotion_common_get_responce.getResult);n.Copy(o.data.clickURL);var a=Date.now();t.setStorageSync("url_time",a),n.show=!0}})},requst:function(e){var n=this,o="859a28687efe4f4eb0f88f5669e869f6",a="8abdd6bc4b34757b9793f48aba4883d5",i=this.dateFormat(new Date);console.log("请求");var u="jd.union.open.goods.promotiongoodsinfo.query",r=e,s={end_date:null,optional_fields:null,order_state:"WAIT_SELLER_STOCK_OUT",start_date:null,skuIds:r},d=o+"360buy_param_json"+JSON.stringify(s)+"app_key"+a+"method"+u+"timestamp"+i+"v1.0"+o,f=this.sign(d),l="https://api.jd.com/routerjson?app_key="+a+"&method="+u+"&v=1.0&sign="+f+"&360buy_param_json="+JSON.stringify(s)+"&timestamp="+i;t.request({url:l,data:{},success:function(e){console.log(e);var o=JSON.parse(e.data.jd_union_open_goods_promotiongoodsinfo_query_responce.queryResult);if(!o.data)return n.state=!1,n.show=!1,n.jdvalue=null,t.showLoading({mask:!0,icon:"error",title:"无效链接"}),void setTimeout((function(){t.hideLoading()}),2500);n.redata=o.data[0],console.log(n.redata),n.urlchenge(o.data[0].materialUrl)}})},md5:function(t){return(0,a.default)(t).toString(i.default.enc.Hex)},sign:function(t){return this.md5(t).toUpperCase()},dateFormat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if("string"===typeof t)return t;var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),s:t.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return e},Copy:function(e){t.setClipboardData({data:e,success:function(e){t.showToast({title:"查询成功"})}})}}};e.default=u}).call(this,n("543d")["default"])},c4ff:function(t,e,n){"use strict";n.r(e);var o=n("61bf"),a=n("d54d");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("b892");var u=n("f0c5"),r=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=r.exports},d54d:function(t,e,n){"use strict";n.r(e);var o=n("be3a"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a}},[["1503","common/runtime","common/vendor"]]]);