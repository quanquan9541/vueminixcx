(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/MuserPhoneValue/add"],{1087:function(e,t,n){"use strict";(function(e,a){var u=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n("2eee")),i=u(n("c973")),r=u(n("9523")),s=n("d983"),l=n("0706");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=e.database();function m(e){var t={};for(var n in s.validator)e.indexOf(n)>-1&&(t[n]=s.validator[n]);return t}var h={data:function(){var e={age:null,sex:null,ram:null,rom:null,phonebrand:null,isbrand:null,moneymaxjiag:null,ismoney:null,import:[],screenv:1,camerav:1,fastchargev:1,endurancev:1,lightthinv:1,performancev:1};return{formData:e,wer:"type==1 && status==true",subTitleColor:"#999",disabled:!0,butext:"提交",formOptions:{sex_localdata:[{text:"女",value:0},{text:"男",value:1}],ram_localdata:[{value:4,text:4},{value:6,text:6},{value:8,text:8},{value:12,text:12},{value:16,text:16},{value:18,text:18},{value:"其他",text:"其他"}],rom_localdata:[{value:32,text:32},{value:64,text:64},{value:128,text:128},{value:256,text:256},{value:512,text:512},{value:1024,text:1024},{value:"其他",text:"其他"}],isbrand_localdata:[{text:"无影响",value:0},{text:"有影响",value:1}],ismoney_localdata:[{text:"贵",value:0},{text:"不贵",value:1}],import_localdata:[{value:"屏幕显示效果",text:"屏幕显示效果"},{value:"影像(拍照)",text:"影像(拍照)"},{value:"充电速度",text:"充电速度"},{value:"续航/电池容量",text:"续航/电池容量"},{value:"重量/尺寸",text:"重量/尺寸"},{value:"性能",text:"性能"}]},rules:f({},m(Object.keys(e)))}},onLoad:function(){a.showLoading({title:"加载中",mask:!0}),this.getuserPhoneValue(this.userInfo._id)},onReady:function(){this.$refs.form.setRules(this.rules)},computed:{userInfo:function(){return l.store.userInfo},hasLogin:function(){return l.store.hasLogin},sum:function(){return this.formData.screenv+this.formData.camerav+this.formData.fastchargev+this.formData.endurancev+this.formData.lightthinv+this.formData.performancev}},methods:{getuserPhoneValue:function(e){var t=this;return(0,i.default)(o.default.mark((function n(){var u;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,d.collection("MuserPhoneValue").where("user_id=='".concat(e,"'")).get({getCount:!0,getOne:!0});case 2:u=n.sent,setTimeout((function(){a.hideLoading(),t.changesubTitle()}),800),u.result.count&&(t.formData=u.result.data);case 5:case"end":return n.stop()}}),n)})))()},change:function(e){this.changesubTitle()},changesubTitle:function(){var e=this.valuesum();if(!e)return this.subTitleColor="#FFB94C",void(this.disabled=!1);this.disabled=!0,this.subTitleColor=e},valuesum:function(){return 100!=this.sum&&(this.sum<100?"blue":"red")},submit:function(){var e=this;a.showLoading({mask:!0}),this.$refs.form.validate().then((function(t){return e.submitForm(t)})).catch((function(){})).finally((function(){a.hideLoading()}))},submitForm:function(e){var t=this;if(!this.formData._id)return d.collection("MuserPhoneValue").add(e).then((function(e){a.showToast({icon:"none",title:"新增成功"}),t.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return a.navigateBack()}),500)})).catch((function(e){a.showModal({content:e.message||"请求服务失败",showCancel:!1})}));this.submiteditForm(e)},submiteditForm:function(e){var t=this;return d.collection("MuserPhoneValue").doc(this.formData._id).update(f(f({},e),{},{last_date:Date.now()})).then((function(e){a.showToast({icon:"none",title:"修改成功"}),t.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return a.navigateBack()}),500)})).catch((function(e){a.showModal({content:e.message||"请求服务失败",showCancel:!1})}))}}};t.default=h}).call(this,n("a9ff")["default"],n("543d")["default"])},"2f48":function(e,t,n){"use strict";n.r(t);var a=n("a03d"),u=n("aa24");for(var o in u)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return u[e]}))}(o);n("719a");var i=n("f0c5"),r=Object(i["a"])(u["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=r.exports},"6dc8":function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("8b4a"),n("4a2a"),n("a9ff");a(n("66fd"));var u=a(n("2f48"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(u.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"719a":function(e,t,n){"use strict";var a=n("bd5f"),u=n.n(a);u.a},a03d:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"a418"))},uniSection:function(){return n.e("uni_modules/uni-section/components/uni-section/uni-section").then(n.bind(null,"2882"))},uniFormsItem:function(){return n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(n.bind(null,"6fc6"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"5463"))},uniDataCheckbox:function(){return n.e("uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox").then(n.bind(null,"6439"))},uniDataPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker")]).then(n.bind(null,"7238"))},uSlider:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-slider/u-slider")]).then(n.bind(null,"ffa6"))}},u=function(){var e=this.$createElement;this._self._c},o=[]},aa24:function(e,t,n){"use strict";n.r(t);var a=n("1087"),u=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=u.a},bd5f:function(e,t,n){}},[["6dc8","common/runtime","common/vendor"]]]);