(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Mcamera-edit"],{"32e3":function(e,t,a){"use strict";a.r(t);var n=a("e425"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},"5fd3":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var n={uniForms:a("2b75").default,uniFormsItem:a("4194").default,uniDataPicker:a("9aad").default,uniDataCheckbox:a("ddbd").default,uniEasyinput:a("8e06").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"uni-container"},[a("uni-forms",{ref:"form",attrs:{model:e.formData,validateTrigger:"bind"}},[a("uni-forms-item",{attrs:{name:"edit_id",label:"名称"}},[a("v-uni-view",[e._v(e._s(this.name[0]?this.name[0].text:"厂商")+"-"+e._s(this.name[1]?this.name[1].text:"品牌"))]),a("uni-data-picker",{attrs:{collection:"Manufacturer_brand","parent-field":"parent_id.value",placeholder:"请选择型号","self-field":"_id",field:"_id as value, name as text"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onchange.apply(void 0,arguments)}},model:{value:e.formData.edit_id,callback:function(t){e.$set(e.formData,"edit_id",t)},expression:"formData.edit_id"}})],1),a("uni-forms-item",{attrs:{name:"ComeraType",label:"类型",required:!0}},[a("uni-data-checkbox",{attrs:{localdata:e.formOptions.ComeraType_localdata},model:{value:e.formData.ComeraType,callback:function(t){e.$set(e.formData,"ComeraType",t)},expression:"formData.ComeraType"}})],1),a("uni-forms-item",{attrs:{name:"Comeraedit",label:"详情",required:!0}},[a("uni-easyinput",{attrs:{placeholder:"相机详情"},model:{value:e.formData.Comeraedit,callback:function(t){e.$set(e.formData,"Comeraedit",t)},expression:"formData.Comeraedit"}})],1),a("uni-forms-item",{attrs:{name:"Comeravalue",label:"数值",required:!0}},[a("uni-easyinput",{attrs:{placeholder:"相机数值644",type:"number"},model:{value:e.formData.Comeravalue,callback:function(t){e.$set(e.formData,"Comeravalue",t)},expression:"formData.Comeravalue"}})],1),a("uni-forms-item",{attrs:{name:"Comeraadd",label:"附加分"}},[a("uni-easyinput",{attrs:{placeholder:"特别加分",type:"number"},model:{value:e.formData.Comeraadd,callback:function(t){e.$set(e.formData,"Comeraadd",t)},expression:"formData.Comeraadd"}})],1),a("uni-forms-item",{attrs:{name:"sort",label:"排序"}},[a("uni-easyinput",{attrs:{type:"number"},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1),a("v-uni-view",{staticClass:"uni-button-group"},[a("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交")]),a("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[a("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[e._v("返回")])],1)],1)],1)],1)},i=[]},b9e5:function(e,t,a){"use strict";a.r(t);var n=a("5fd3"),r=a("32e3");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);var o=a("f0c5"),l=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=l.exports},cb79:function(e,t,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.enumConverter=void 0,t.filterToWhere=function(e,t){var a={};for(var n in e){var o=e[n],l=o.type,u=o.value;switch(l){case"search":"string"===typeof u&&u.length&&(a[n]=new RegExp(u));break;case"select":if(u.length){var d,s=[],f=(0,i.default)(u);try{for(f.s();!(d=f.n()).done;){var c=d.value;s.push(t.eq(c))}}catch(_){f.e(_)}finally{f.f()}a[n]=t.or(s)}break;case"range":if(u.length){var m=u[0],v=u[1];a[n]=t.and([t.gte(m),t.lte(v)])}break;case"date":if(u.length){var p=(0,r.default)(u,2),h=p[0],b=p[1],C=new Date(h),g=new Date(b);a[n]=t.and([t.gte(C),t.lte(g)])}break;case"timestamp":if(u.length){var y=(0,r.default)(u,2),x=y[0],D=y[1];a[n]=t.and([t.gte(x),t.lte(D)])}break}}return a},t.validator=void 0;var r=n(a("3835")),i=n(a("b85c"));a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("14d9");t.validator={edit_id:{rules:[{format:"string"}],title:"名称",label:"名称"},ComeraType:{rules:[{required:!0},{format:"string"},{range:[{text:"前置",value:"前置"},{text:"主摄",value:"主摄"},{text:"广角",value:"广角"},{text:"长焦",value:"长焦"},{text:"人像",value:"人像"},{text:"微距",value:"微距"},{text:"景深",value:"景深"},{text:"其他",value:"其他"}]}],title:"类型",label:"类型"},Comeraedit:{rules:[{required:!0},{format:"string"}],title:"详情",label:"详情"},Comeravalue:{rules:[{required:!0},{format:"int"}],title:"数值",label:"数值"},Comeraadd:{rules:[{format:"int"}],title:"附加分",defaultValue:0,label:"附加分"},sort:{rules:[{format:"int"}],title:"排序",defaultValue:0,label:"排序"}};t.enumConverter={ComeraType_valuetotext:{"前置":"前置","主摄":"主摄","广角":"广角","长焦":"长焦","人像":"人像","微距":"微距","景深":"景深","其他":"其他"}}},e425:function(e,t,a){"use strict";(function(e,n){a("7a82");var r=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a("5530"));a("caad"),a("2532"),a("b64b"),a("d3b7");var o=a("cb79"),l=e.database();l.command;function u(e){var t={};for(var a in o.validator)e.includes(a)&&(t[a]=o.validator[a]);return t}var d={data:function(){var e={edit_id:"",ComeraType:"",Comeraedit:"",Comeravalue:null,Comeraadd:0,sort:0};return{name:"",formData:e,formOptions:{ComeraType_localdata:[{text:"前置",value:"前置"},{text:"主摄",value:"主摄"},{text:"广角",value:"广角"},{text:"长焦",value:"长焦"},{text:"人像",value:"人像"},{text:"微距",value:"微距"},{text:"景深",value:"景深"},{text:"其他",value:"其他"}]},rules:(0,i.default)({},u(Object.keys(e)))}},onLoad:function(e){if(e.id){var t=e.id;this.formDataId=t,this.getDetail(t)}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{onchange:function(e){n.log(e),this.name=e.detail.value},submit:function(){var e=this;uni.showLoading({mask:!0}),this.$refs.form.validate().then((function(t){return e.submitForm(t)})).catch((function(){})).finally((function(){uni.hideLoading()}))},submitForm:function(e){var t=this;return l.collection("Mcamera").doc(this.formDataId).update(e).then((function(e){uni.showToast({title:"修改成功"}),t.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(e){uni.showModal({content:e.message||"请求服务失败",showCancel:!1})}))},getDetail:function(e){var t=this;uni.showLoading({mask:!0}),l.collection("Mcamera").doc(e).field("edit_id,ComeraType,Comeraedit,Comeravalue,Comeraadd,sort").get().then((function(e){var a=e.result.data[0];a&&(t.formData=a,l.collection("Manufacturer_brand").where("_id=='".concat(a.edit_id,"'")).get({getOne:!0}).then((function(e){var a=[];a[0]=e.result.data.z_id,a[1]=e.result.data.parent_id,t.name=a})))})).catch((function(e){uni.showModal({content:e.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))}}};t.default=d}).call(this,a("a9ff")["default"],a("5a52")["default"])}}]);