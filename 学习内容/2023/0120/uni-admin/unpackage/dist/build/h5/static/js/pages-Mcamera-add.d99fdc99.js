(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Mcamera-add"],{1563:function(e,a,t){"use strict";t.r(a);var r=t("a16b"),n=t("712d");for(var i in n)["default"].indexOf(i)<0&&function(e){t.d(a,e,(function(){return n[e]}))}(i);var o=t("f0c5"),l=Object(o["a"])(n["default"],r["b"],r["c"],!1,null,"24689d9d",null,!1,r["a"],void 0);a["default"]=l.exports},"712d":function(e,a,t){"use strict";t.r(a);var r=t("cdb6"),n=t.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(a,e,(function(){return r[e]}))}(i);a["default"]=n.a},a16b:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return i})),t.d(a,"a",(function(){return r}));var r={uniForms:t("2b75").default,uniFormsItem:t("4194").default,uniDataPicker:t("9aad").default,uniDataCheckbox:t("ddbd").default,uniEasyinput:t("8e06").default},n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"uni-container"},[t("uni-forms",{ref:"form",attrs:{model:e.formData,validateTrigger:"bind"}},[t("uni-forms-item",{staticClass:"namew",attrs:{name:"edit_id",label:"名称"}},[t("v-uni-view",[e._v(e._s(this.name[0]?this.name[0].text:"厂商")+"-"+e._s(this.name[1]?this.name[1].text:"品牌"))]),t("uni-data-picker",{attrs:{collection:"Manufacturer_brand","parent-field":"parent_id.value",placeholder:"请选择型号","self-field":"_id",field:"_id as value, name as text"},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.onchange.apply(void 0,arguments)}},model:{value:e.formData.edit_id,callback:function(a){e.$set(e.formData,"edit_id",a)},expression:"formData.edit_id"}})],1),t("uni-forms-item",{attrs:{name:"ComeraType",label:"类型",required:!0}},[t("uni-data-checkbox",{attrs:{localdata:e.formOptions.ComeraType_localdata},model:{value:e.formData.ComeraType,callback:function(a){e.$set(e.formData,"ComeraType",a)},expression:"formData.ComeraType"}})],1),t("uni-forms-item",{attrs:{name:"Comeraedit",label:"详情",required:!0}},[t("uni-easyinput",{attrs:{placeholder:"相机详情"},model:{value:e.formData.Comeraedit,callback:function(a){e.$set(e.formData,"Comeraedit",a)},expression:"formData.Comeraedit"}})],1),t("uni-forms-item",{attrs:{name:"Comeravalue",label:"数值",required:!0}},[t("uni-easyinput",{attrs:{placeholder:"相机数值644",type:"number"},model:{value:e.formData.Comeravalue,callback:function(a){e.$set(e.formData,"Comeravalue",a)},expression:"formData.Comeravalue"}})],1),t("uni-forms-item",{attrs:{name:"Comeraadd",label:"附加分"}},[t("uni-easyinput",{attrs:{placeholder:"特别加分",type:"number"},model:{value:e.formData.Comeraadd,callback:function(a){e.$set(e.formData,"Comeraadd",a)},expression:"formData.Comeraadd"}})],1),t("uni-forms-item",{attrs:{name:"sort",label:"排序"}},[t("uni-easyinput",{attrs:{type:"number"},model:{value:e.formData.sort,callback:function(a){e.$set(e.formData,"sort",a)},expression:"formData.sort"}})],1),t("v-uni-view",{staticClass:"uni-button-group"},[t("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.submit.apply(void 0,arguments)}}},[e._v("提交")]),t("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[t("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[e._v("返回")])],1)],1)],1)],1)},i=[]},cb79:function(e,a,t){"use strict";t("7a82");var r=t("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.enumConverter=void 0,a.filterToWhere=function(e,a){var t={};for(var r in e){var o=e[r],l=o.type,u=o.value;switch(l){case"search":"string"===typeof u&&u.length&&(t[r]=new RegExp(u));break;case"select":if(u.length){var s,d=[],f=(0,i.default)(u);try{for(f.s();!(s=f.n()).done;){var c=s.value;d.push(a.eq(c))}}catch(_){f.e(_)}finally{f.f()}t[r]=a.or(d)}break;case"range":if(u.length){var m=u[0],v=u[1];t[r]=a.and([a.gte(m),a.lte(v)])}break;case"date":if(u.length){var b=(0,n.default)(u,2),p=b[0],h=b[1],C=new Date(p),x=new Date(h);t[r]=a.and([a.gte(C),a.lte(x)])}break;case"timestamp":if(u.length){var y=(0,n.default)(u,2),g=y[0],D=y[1];t[r]=a.and([a.gte(g),a.lte(D)])}break}}return t},a.validator=void 0;var n=r(t("3835")),i=r(t("b85c"));t("4d63"),t("c607"),t("ac1f"),t("2c3e"),t("25f0"),t("14d9");a.validator={edit_id:{rules:[{format:"string"}],title:"名称",label:"名称"},ComeraType:{rules:[{required:!0},{format:"string"},{range:[{text:"前置",value:"前置"},{text:"主摄",value:"主摄"},{text:"广角",value:"广角"},{text:"长焦",value:"长焦"},{text:"人像",value:"人像"},{text:"微距",value:"微距"},{text:"景深",value:"景深"},{text:"其他",value:"其他"}]}],title:"类型",label:"类型"},Comeraedit:{rules:[{required:!0},{format:"string"}],title:"详情",label:"详情"},Comeravalue:{rules:[{required:!0},{format:"int"}],title:"数值",label:"数值"},Comeraadd:{rules:[{format:"int"}],title:"附加分",defaultValue:0,label:"附加分"},sort:{rules:[{format:"int"}],title:"排序",defaultValue:0,label:"排序"}};a.enumConverter={ComeraType_valuetotext:{"前置":"前置","主摄":"主摄","广角":"广角","长焦":"长焦","人像":"人像","微距":"微距","景深":"景深","其他":"其他"}}},cdb6:function(e,a,t){"use strict";(function(e,r){t("7a82");var n=t("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(t("5530"));t("caad"),t("2532"),t("b64b"),t("d3b7");var o=t("cb79"),l=e.database();l.command;function u(e){var a={};for(var t in o.validator)e.includes(t)&&(a[t]=o.validator[t]);return a}var s={data:function(){var e={edit_id:"",ComeraType:"",Comeraedit:"",Comeravalue:null,Comeraadd:0,sort:0};return{name:"",formData:e,formOptions:{ComeraType_localdata:[{text:"前置",value:"前置"},{text:"主摄",value:"主摄"},{text:"广角",value:"广角"},{text:"长焦",value:"长焦"},{text:"人像",value:"人像"},{text:"微距",value:"微距"},{text:"景深",value:"景深"},{text:"其他",value:"其他"}]},rules:(0,i.default)({},u(Object.keys(e)))}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{onchange:function(e){r.log(e),this.name=e.detail.value},submit:function(){var e=this;uni.showLoading({mask:!0}),this.$refs.form.validate().then((function(a){return e.submitForm(a)})).catch((function(){})).finally((function(){uni.hideLoading()}))},submitForm:function(e){var a=this;return l.collection("Mcamera").add(e).then((function(e){uni.showToast({title:"新增成功"}),a.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(e){uni.showModal({content:e.message||"请求服务失败",showCancel:!1})}))}}};a.default=s}).call(this,t("a9ff")["default"],t("5a52")["default"])}}]);